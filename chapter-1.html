<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>控制器</title>
</head>
<body ng-app="app">
    <input type="text" ng-model="name">
    <h1>hello {{name}}</h1>

    <div ng-controller="ctrl">
        <h1>my controller:{{clock.now}}</h1>
        <span>{{myTime.hours}}</span>
        <span>{{myTime.minutes}}</span>
        <span>{{myTime.seconds}}</span>
    </div>

    <script type="text/javascript" src="angular.js"></script>
    <script type="text/javascript">
        var app = angular.module("app",[]);

        // app.controller("ctrl",function($scope){
        //     $scope.clock = {
        //         now : new Date(),
        //     };
        //     var updateClock = function(){
        //         $scope.clock.now = new Date();
        //     };
        //     setInterval(function(){
        //         $scope.$apply(updateClock);     // $apply ????
        //     },1000)
        //     //setInterval(updateClock,1000);   // why not write like this
        // })

        app.controller("ctrl",function($scope){
            function getTime(){
                var timeNow = new Date();
                $scope.myTime = {
                    hours:timeNow.getHours(),
                    minutes:timeNow.getMinutes(),
                    seconds:timeNow.getSeconds()
                }
            }
            
            setInterval(function(){
                $scope.$apply(getTime);
            },1000)
        })

        // app.controller("ctrl",function($scope,$timeout){
        //     var updateClock = function(){
        //         $scope.clock = new Date()
        //         $timeout(function() {
        //             updateClock();
        //         }, 1000);
        //     }
        //     updateClock();
        // })
    </script>
</body>
</html>
